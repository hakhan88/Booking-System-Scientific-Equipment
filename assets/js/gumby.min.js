!function(e){"use strict";function t(){this.$dom=e(document);this.$html=this.$dom.find("html");this.isOldie=!!this.$html.hasClass("oldie");this.click="click";this.onReady=this.onOldie=this.onTouch=false;this.autoInit=e("script[gumby-init]").attr("gumby-init")==="false"?false:true;this.debugMode=Boolean(e("script[gumby-debug]").length);this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0);this.gumbyTouch=false;this.touchEvents="js/libs";this.breakpoint=Number(e("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768;this.touchEventsLoaded=false;this.uiModulesReady=false;this.uiModules={};this.inits={};var t=e("script[gumby-touch]").attr("gumby-touch"),n=e("script[gumby-path]").attr("gumby-path");if(t==="false"){this.touchEvents=false}else{if(t){this.touchEvents=t}else if(n){this.touchEvents=n}}if(this.touchDevice){this.click+=" tap"}if(this.touchDevice&&e(window).width()<this.breakpoint){this.$html.addClass("gumby-touch");this.gumbyTouch=true}else{this.$html.addClass("gumby-no-touch")}if(this.debugMode){this.debug("Gumby is in debug mode")}}t.prototype.init=function(e){var t=this,n=e?e:{};this.$dom.ready(function(){if(n.debug){t.debugMode=true}t.debug("Initializing Gumby");var e=n.uiModules?n.uiModules:false;t.initUIModules(e);if(t.onReady){t.onReady()}if(t.isOldie&&t.onOldie){t.onOldie()}if(Modernizr.touch&&t.onTouch){t.onTouch()}});return this};t.prototype.helpers=function(){if(this.onReady){this.onReady()}if(this.isOldie&&this.onOldie){this.onOldie()}if(Modernizr.touch&&this.onTouch){this.onTouch()}};t.prototype.ready=function(e){if(e&&typeof e==="function"){this.onReady=e}return this};t.prototype.oldie=function(e){if(e&&typeof e==="function"){this.onOldie=e}return this};t.prototype.touch=function(e){if(e&&typeof e==="function"){this.onTouch=e}return this};t.prototype.console=function(e,t){if(!this.debugMode||!window.console){return}console[console[e]?e:"log"](t.length>1?Array.prototype.slice.call(t):t[0])};t.prototype.log=function(){this.console("log",arguments)};t.prototype.debug=function(){this.console("debug",arguments)};t.prototype.warn=function(){this.console("warn",arguments)};t.prototype.error=function(){this.console("error",arguments)};t.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}};t.prototype.selectAttr=function(){var e=0;for(;e<arguments.length;e++){var t=arguments[e],n="data-"+arguments[e],r="gumby-"+arguments[e];if(this.is("["+n+"]")){return this.attr(n)?this.attr(n):true}else if(this.is("["+r+"]")){return this.attr(r)?this.attr(r):true}else if(this.is("["+t+"]")){return this.attr(t)?this.attr(t):true}}return false};t.prototype.addInitalisation=function(e,t){this.inits[e]=t};t.prototype.initialize=function(e,t){if(typeof e==="object"){var n=0;for(n;n<e.length;n++){if(!this.inits[e[n]]||typeof this.inits[e[n]]!=="function"){this.error("Error initializing module: "+e[n]);continue}this.inits[e[n]](t)}}else if(this.inits[e]&&typeof this.inits[e]==="function"){this.inits[e](t)}else{this.error("Error initializing module: "+e)}return this};t.prototype.UIModule=function(e){var t=e.module;this.uiModules[t]=e};t.prototype.initUIModules=function(e){var t,n,r=this.uiModules;if(e){r=e}for(t in r){n=e?r[t]:t;this.uiModules[n].init()}};window.Gumby=new t}(jQuery);!function(e){"use strict";function t(e){Gumby.debug("Initializing Checkbox",e);this.$el=e;this.$input=this.$el.find("input[type=checkbox]");var t=this;this.$el.on(Gumby.click,function(e){e.preventDefault();if(t.$input.is("[disabled]")){return}if(t.$el.hasClass("checked")){t.update(false)}else{t.update(true)}}).on("gumby.check",function(){Gumby.debug("Check event triggered",t.$el);t.update(true)}).on("gumby.uncheck",function(){Gumby.debug("Uncheck event triggered",t.$el);t.update(false)});if(this.$input.prop("checked")||this.$el.hasClass("checked")){t.update(true)}}t.prototype.update=function(e){var t=this.$el.find("span");if(e){Gumby.debug("Checking Checkbox",this.$el);t.append('<i class="icon-stop" />');this.$input.prop("checked",true);Gumby.debug("Triggering onCheck event",this.$el);Gumby.debug("Triggering onChange event",this.$el);this.$el.addClass("checked").trigger("gumby.onCheck").trigger("gumby.onChange")}else{Gumby.debug("Unchecking Checkbox",this.$el);this.$input.prop("checked",false);t.find("i").remove();Gumby.debug("Triggering onUncheck event",this.$el);Gumby.debug("Triggering onChange event",this.$el);this.$el.removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange")}};Gumby.addInitalisation("checkbox",function(){e(".checkbox").each(function(){var n=e(this);if(n.data("isCheckbox")){return true}n.data("isCheckbox",true);new t(n)})});Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkbox")}})}(jQuery);!function(e){"use strict";function t(t){Gumby.debug("Initializing Retina",t);this.$el=t;this.imageSrc=this.$el.attr("src");this.retinaSrc=this.fetchRetinaImage();this.$retinaImg=e(new Image);var n=this;if(!this.retinaSrc){return false}this.$retinaImg.attr("src",this.retinaSrc).load(function(){n.retinaImageLoaded()}).error(function(){Gumby.error("Couln't load retina image: "+n.retinaSrc)})}t.prototype.fetchRetinaImage=function(){var e=this.imageSrc,t=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);if(t<0){return false}return e.substr(0,t)+"@2x"+e.substr(t,e.length)};t.prototype.retinaImageLoaded=function(){Gumby.debug("Swapping image for retina version",this.$el);Gumby.debug("Triggering onRetina event",this.$el);this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")};Gumby.addInitalisation("retina",function(){if(!window.devicePixelRatio||window.devicePixelRatio<=1){return}e("img[data-retina],img[gumby-retina],img[retina]").each(function(){var n=e(this);if(n.data("isRetina")){return true}n.data("isRetina",true);new t(n)})});Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(jQuery);!function(e){"use strict";function t(t){Gumby.debug("Initializing Tabs",t);this.$el=t;this.$nav=this.$el.find("> ul.tab-nav > li");this.$content=this.$el.children(".tab-content");var n=this;this.$nav.children("a").on(Gumby.click,function(t){t.preventDefault();n.click(e(this))});this.$el.on("gumby.set",function(e,t){Gumby.debug("Set event triggered",n.$el);n.set(e,t)})}t.prototype.click=function(e){var t=e.parent().index();if(this.$nav.eq(t).add(this.$content.eq(t)).hasClass("active")){return}Gumby.debug("Setting active tab to "+t,this.$el);this.$nav.add(this.$content).removeClass("active");this.$nav.eq(t).add(this.$content.eq(t)).addClass("active");Gumby.debug("Triggering onChange event",this.$el);this.$el.trigger("gumby.onChange",t)};t.prototype.set=function(e,t){this.$nav.eq(t).find("a").trigger(Gumby.click)};Gumby.addInitalisation("tabs",function(){e(".tabs").each(function(){var n=e(this);if(n.data("isTabs")){return true}n.data("isTabs",true);new t(n)})});Gumby.UIModule({module:"tabs",events:["onChange","set"],init:function(){Gumby.initialize("tabs")}})}(jQuery);!function(e){"use strict";if((!Gumby.touchDevice||!Gumby.touchEvents)&&Gumby.autoInit){window.Gumby.init()}else if(Gumby.touchEvents&&Gumby.touchDevice){Gumby.debug("Loading jQuery mobile touch events");yepnope.errorTimeout=2e3;Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){if(!e.mobile){Gumby.error("Error loading jQuery mobile touch events")}Gumby.touchEventsLoaded=true;if(Gumby.autoInit){window.Gumby.init()}else if(Gumby.uiModulesReady){Gumby.helpers()}}})}if(typeof define=="function"&&define.amd){define(window.Gumby)}}(jQuery)